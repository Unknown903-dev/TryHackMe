Passive Reconnaissance

whois to query WHOIS servers 	=  to query WHOIS records

nslookup to query DNS servers   =|Both query 
dig to query DNS servers        =|database records         


- they are public record and do not alert the target

online servives 
- DNSDumpster
- shodan.io

They allow us to collect info about our target without directly connecting to it
---------------------------------------

passive recon = you rely on publicly available knowledge
- Looking up DNS records of a domain from a public DNS server.
- Checking job ads related to the target website.
- Reading news articles about the target company.

Active recon = requires direct engagement with the target

- Connecting to one of the company servers such as HTTP, FTP, and SMTP.
- Calling the company in an attempt to get information (social engineering).
- Entering company premises pretending to be a repairman.
--------------------------------
Whois  = request and response protocol that follows the RFC 3912 specification

whois server  = listens on TCP port 43 for incoming requests
- replies with various information related to the domain requested
- Registrar: Via which registrar was the domain name registered?
- Contact info of registrant: Name, organization, address, phone, among other things. (unless made hidden via a privacy service)
- Creation, update, and expiration dates: When was the domain name first registered? When was it last updated? And when does it need to be renewed?
- Name Server: Which server to ask to resolve the domain name?

domain registrar is responsible for maintaining the WHOIS records for the domain names it is leasing

whois = generally faster and more convenient to use your local whois client.
###################
whois DOMAIN_NAME	= get various information about the domain name we were looking up.
###################
- info collected can be inspected to find new attack surfaces, such as social engineering or technical attacks
For instance, depending on the scope of the penetration test, you might consider an attack against the email server of the admin user or the DNS servers, assuming they are owned by your client and fall within the scope of the penetration test

- due to automated tools abusing WHOIS queries to harvest email addresses, many WHOIS services take measures against this
- many registrants subscribe to privacy services to avoid their email addresses being harvested by spammers and keep their information private.
######################
nslookup DOMAIN_NAME	= (name server look up)Find the IP address of a domain name 
######################
nslookup OPTIONS DOMAIN_NAME SERVER
----------------------------
options:			| server:	
A	IPv4 Addresses		|    is the DNS server that you want to query. You can choose any local or public DNS server to query. Cloudflare offers 1.1.1.1 and 1.0.0.1, Google offers 8.8.8.8 and 8.8.4.4, and Quad9 offers 9.9.9.9 and 149.112.112.112. 
AAAA	IPv6 Addresses		|    There are many more public DNS servers that you can choose from if you want alternatives to your ISP’s DNS servers.
CNAME	Canonical Name		|
MX	Mail Servers		|
SOA	Start of Authority	|
TXT	TXT Records		|
-----------------------------

EX:	nslookup -type=A tryhackme.com 1.1.1.1

learn about the email servers and configurations for a particular domain. You can issue nslookup -type=MX tryhackme.com. Here is an example:

Google provides the listed mail servers; therefore, we should not expect the mail servers to be running a vulnerable server version.
============================================================
can also use dig = Domain Information Groper

dig DOMAIN_NAME
dig DOMAIN_NAME TYPE		= to specify record type
dig @SERVER DOMAIN_NAME TYPE	= can select the server we want to query using 
========================================================
these tools cant find subdomains on there own

finding the subdomains can
- can hold a trove of information about your target
- possible that a subdomains has been set up and is not updated regularly.
- Lack of proper regular updates usually leads to vulnerable services

how to find subdomains
- can consider using multiple search engines to compile a list of publicly known subdomains. 
- can also rely on brute-forcing queries to find which subdomains have DNS records

DNSDumpster = can use an online service that offers detailed answers to DNS queries
- will return the collected DNS information in easy-to-read tables and a graph
- also provide any collected information about listening servers.

pen test against specific targets =  Shodan.io can be helpful to learn various pieces of information about the client’s network, without actively connecting to it
- learn about connected and exposed devices belonging to your organization
- Once it gets a response, it collects all the information related to the service and saves it in the database to make it searchable

can learn these related to our search
- IP address
- hosting company
- geographic location
- server type and version

----------------------------
Lookup WHOIS record			whois tryhackme.com
Lookup DNS A records			nslookup -type=A tryhackme.com
Lookup DNS MX records at DNS server	nslookup -type=MX tryhackme.com 1.1.1.1
Lookup DNS TXT records			nslookup -type=TXT tryhackme.com
Lookup DNS A records			dig tryhackme.com A
Lookup DNS MX records at DNS server	dig @1.1.1.1 tryhackme.com MX
Lookup DNS TXT records			dig tryhackme.com TXT

